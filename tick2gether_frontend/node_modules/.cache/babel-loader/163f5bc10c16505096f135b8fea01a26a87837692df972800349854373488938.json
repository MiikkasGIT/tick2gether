{"ast":null,"code":"import React,{useState}from'react';import ToDo from'./ToDo';import{sendWebSocketMessage}from'../websocket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ToDoList(_ref){let{todos=[],setTasks,isDeleteMode,onEditTodo,handleDeleteTask,userId,users}=_ref;const[selectedTodoId,setSelectedTodoId]=useState(null);const handleCheckboxChange=async taskId=>{const updatedTodos=todos.map(todo=>{if(todo.taskId===taskId){const updatedTodo={...todo,completed:!todo.completed};return updatedTodo;}return todo;});setTasks(updatedTodos);const updatedTask=updatedTodos.find(todo=>todo.taskId===taskId);try{console.log('Sending WebSocket message:',\"/app/updateTask/\".concat(taskId),{...updatedTask,userId,categoryId:parseInt(updatedTask.categoryId,10)});sendWebSocketMessage(\"/app/updateTask/\".concat(taskId),{...updatedTask,userId,categoryId:parseInt(updatedTask.categoryId,10)});}catch(error){console.error('Error sending WebSocket message:',error);}};const handleDateChange=async(taskId,date,purpose)=>{const updatedTodos=todos.map(todo=>{if(todo.taskId===taskId){return{...todo,[\"\".concat(purpose,\"Date\")]:date?new Date(date).toISOString():null};}return todo;});setTasks(updatedTodos);const updatedTask=updatedTodos.find(todo=>todo.taskId===taskId);try{console.log('Sending WebSocket message for date update:',\"/app/updateTask/\".concat(taskId),{...updatedTask,userId});sendWebSocketMessage(\"/app/updateTask/\".concat(taskId),{...updatedTask,userId});}catch(error){console.error('Error sending WebSocket message for date update:',error);}};const handleDeleteClick=async taskId=>{try{await handleDeleteTask(taskId);console.log('Sending WebSocket message for delete:',\"/app/deleteTask/\".concat(taskId),{taskId});sendWebSocketMessage(\"/app/deleteTask/\".concat(taskId),{taskId});}catch(error){console.error('Error deleting task:',error.response?error.response.data:error.message);}};return/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{className:\"sr-only\",children:\"Tasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:todos.map(todo=>/*#__PURE__*/_jsx(ToDo,{todo:todo,handleCheckboxChange:()=>handleCheckboxChange(todo.taskId),handleTodoClick:()=>setSelectedTodoId(todo.taskId===selectedTodoId?null:todo.taskId),handleDelete:()=>handleDeleteClick(todo.taskId),handleEditClick:()=>onEditTodo?onEditTodo(todo):null,isSelected:todo.taskId===selectedTodoId,onDateChange:handleDateChange,isDeleteMode:isDeleteMode,userId:userId,users:users},todo.taskId))})]});}","map":{"version":3,"names":["React","useState","ToDo","sendWebSocketMessage","jsx","_jsx","jsxs","_jsxs","ToDoList","_ref","todos","setTasks","isDeleteMode","onEditTodo","handleDeleteTask","userId","users","selectedTodoId","setSelectedTodoId","handleCheckboxChange","taskId","updatedTodos","map","todo","updatedTodo","completed","updatedTask","find","console","log","concat","categoryId","parseInt","error","handleDateChange","date","purpose","Date","toISOString","handleDeleteClick","response","data","message","children","className","handleTodoClick","handleDelete","handleEditClick","isSelected","onDateChange"],"sources":["/Users/miikkakoensler/Downloads/Tick2GetherProject/tick2gether_frontend/src/components/ToDoList.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ToDo from './ToDo';\nimport { sendWebSocketMessage } from '../websocket';\n\nexport default function ToDoList({ todos = [], setTasks, isDeleteMode, onEditTodo, handleDeleteTask, userId, users }) {\n  const [selectedTodoId, setSelectedTodoId] = useState(null);\n\n  const handleCheckboxChange = async (taskId) => {\n    const updatedTodos = todos.map(todo => {\n      if (todo.taskId === taskId) {\n        const updatedTodo = { ...todo, completed: !todo.completed };\n        return updatedTodo;\n      }\n      return todo;\n    });\n  \n    setTasks(updatedTodos);\n  \n    const updatedTask = updatedTodos.find(todo => todo.taskId === taskId);\n    try {\n      console.log('Sending WebSocket message:', `/app/updateTask/${taskId}`, { ...updatedTask, userId, categoryId: parseInt(updatedTask.categoryId, 10) });\n      sendWebSocketMessage(`/app/updateTask/${taskId}`, { ...updatedTask, userId, categoryId: parseInt(updatedTask.categoryId, 10) });\n    } catch (error) {\n      console.error('Error sending WebSocket message:', error);\n    }\n  };\n\n  const handleDateChange = async (taskId, date, purpose) => {\n    const updatedTodos = todos.map(todo => {\n      if (todo.taskId === taskId) {\n        return {\n          ...todo,\n          [`${purpose}Date`]: date ? new Date(date).toISOString() : null,\n        };\n      }\n      return todo;\n    });\n\n    setTasks(updatedTodos);\n\n    const updatedTask = updatedTodos.find(todo => todo.taskId === taskId);\n    try {\n      console.log('Sending WebSocket message for date update:', `/app/updateTask/${taskId}`, { ...updatedTask, userId });\n      sendWebSocketMessage(`/app/updateTask/${taskId}`, { ...updatedTask, userId });\n    } catch (error) {\n      console.error('Error sending WebSocket message for date update:', error);\n    }\n  };\n\n  const handleDeleteClick = async (taskId) => {\n    try {\n      await handleDeleteTask(taskId);\n      console.log('Sending WebSocket message for delete:', `/app/deleteTask/${taskId}`, { taskId });\n      sendWebSocketMessage(`/app/deleteTask/${taskId}`, { taskId });\n    } catch (error) {\n      console.error('Error deleting task:', error.response ? error.response.data : error.message);\n    }\n  };\n\n  return (\n    <fieldset>\n      <legend className=\"sr-only\">Tasks</legend>\n      <div className=\"space-y-1\">\n        {todos.map(todo => (\n          <ToDo\n            key={todo.taskId}\n            todo={todo}\n            handleCheckboxChange={() => handleCheckboxChange(todo.taskId)}\n            handleTodoClick={() => setSelectedTodoId(todo.taskId === selectedTodoId ? null : todo.taskId)}\n            handleDelete={() => handleDeleteClick(todo.taskId)}\n            handleEditClick={() => onEditTodo ? onEditTodo(todo) : null}\n            isSelected={todo.taskId === selectedTodoId}\n            onDateChange={handleDateChange}\n            isDeleteMode={isDeleteMode}\n            userId={userId}\n            users={users}\n          />\n        ))}\n      </div>\n    </fieldset>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}