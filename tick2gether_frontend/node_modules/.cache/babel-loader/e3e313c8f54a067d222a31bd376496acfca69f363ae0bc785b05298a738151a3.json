{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{format}from'date-fns';import{PlanTaskIcon,PlannedIcon,AddTodoIcon}from'../icons';import Calendar from'./Calendar';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditTaskPopUp(_ref){let{task,onSaveTask,onClose}=_ref;const[taskText,setTaskText]=useState(task.text);const[planDate,setPlanDate]=useState(task.planDate?new Date(task.planDate):null);const[deadlineDate,setDeadlineDate]=useState(task.deadlineDate?new Date(task.deadlineDate):null);const[showCalendar,setShowCalendar]=useState(false);const[showTooltip,setShowTooltip]=useState(false);const[calendarPurpose,setCalendarPurpose]=useState(null);// 'plan' or 'deadline'\nconst ref=useRef(null);useEffect(()=>{function handleClickOutside(event){if(ref.current&&!ref.current.contains(event.target)){onClose();}}document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[ref,onClose]);const handleSaveTask=async e=>{e.preventDefault();if(taskText.trim()===''){setShowTooltip(true);return;}const updatedTask={...task,text:taskText,planDate:planDate?format(planDate,'yyyy-MM-dd'):null,deadlineDate:deadlineDate?format(deadlineDate,'yyyy-MM-dd'):null};await onSaveTask(updatedTask);onClose();};const handleDateChange=date=>{if(calendarPurpose==='plan'){setPlanDate(date);}else if(calendarPurpose==='deadline'){setDeadlineDate(date);}setShowCalendar(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-50\",children:/*#__PURE__*/_jsx(\"div\",{ref:ref,className:\"bg-white rounded-large shadow-custom relative p-1.5 border border-gray-300 w-full max-w-lg\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col space-y-4\",onSubmit:handleSaveTask,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type in what you have to do\",className:\"flex-grow p-2 border rounded-custom bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blueCustom \".concat(showTooltip?'border-red-500':'border-gray-300'),value:taskText,onChange:e=>setTaskText(e.target.value),style:{minWidth:'300px'}// Adjust the minimum width for larger screens\n}),showTooltip&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-500 bg-white border border-red-500 rounded-custom p-2 shadow-lg w-auto left-0 font-semibold\",children:\"To Do Input cannot be empty.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-grayCustom-dark font-medium bg-[#0000000D] hover:bg-gray-200\",onClick:()=>{setCalendarPurpose('deadline');setShowCalendar(true);},style:{flex:'1 1 0'},children:[/*#__PURE__*/_jsx(PlanTaskIcon,{className:\"h-5 w-5\"}),deadlineDate?format(new Date(deadlineDate),'MMMM d'):'Deadline']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setCalendarPurpose('plan');setShowCalendar(true);},className:\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-pinkCustom font-medium bg-pinkCustom-light hover:bg-pink-200\",style:{flex:'1 1 0'},children:[/*#__PURE__*/_jsx(PlannedIcon,{className:\"h-5 w-5 text-pinkCustom\"}),planDate?format(new Date(planDate),'MMMM d'):'Plan']}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-blueCustom font-medium bg-blueCustom-light hover:bg-blue-200\",style:{flex:'1 1 0'},children:[/*#__PURE__*/_jsx(AddTodoIcon,{className:\"h-5 w-5\"}),\"Save Task\"]})]}),showCalendar&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2\",children:/*#__PURE__*/_jsx(Calendar,{selectedDate:calendarPurpose==='plan'?planDate:deadlineDate,setSelectedDate:handleDateChange,setShowCalendar:setShowCalendar})})]})})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","format","PlanTaskIcon","PlannedIcon","AddTodoIcon","Calendar","jsx","_jsx","jsxs","_jsxs","EditTaskPopUp","_ref","task","onSaveTask","onClose","taskText","setTaskText","text","planDate","setPlanDate","Date","deadlineDate","setDeadlineDate","showCalendar","setShowCalendar","showTooltip","setShowTooltip","calendarPurpose","setCalendarPurpose","ref","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleSaveTask","e","preventDefault","trim","updatedTask","handleDateChange","date","className","children","onSubmit","type","placeholder","concat","value","onChange","style","minWidth","onClick","flex","selectedDate","setSelectedDate"],"sources":["/Users/miikkakoensler/Downloads/Tick2GetherProject/tick2gether_frontend/src/components/EditTaskPopUp.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { PlanTaskIcon, PlannedIcon, AddTodoIcon } from '../icons';\nimport Calendar from './Calendar';\n\nexport default function EditTaskPopUp({ task, onSaveTask, onClose }) {\n  const [taskText, setTaskText] = useState(task.text);\n  const [planDate, setPlanDate] = useState(task.planDate ? new Date(task.planDate) : null);\n  const [deadlineDate, setDeadlineDate] = useState(task.deadlineDate ? new Date(task.deadlineDate) : null);\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const [calendarPurpose, setCalendarPurpose] = useState(null); // 'plan' or 'deadline'\n  const ref = useRef(null);\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClose();\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [ref, onClose]);\n\n  const handleSaveTask = async (e) => {\n    e.preventDefault();\n    if (taskText.trim() === '') {\n      setShowTooltip(true);\n      return;\n    }\n    const updatedTask = {\n      ...task,\n      text: taskText,\n      planDate: planDate ? format(planDate, 'yyyy-MM-dd') : null,\n      deadlineDate: deadlineDate ? format(deadlineDate, 'yyyy-MM-dd') : null,\n    };\n\n    await onSaveTask(updatedTask);\n    onClose();\n  };\n\n  const handleDateChange = (date) => {\n    if (calendarPurpose === 'plan') {\n      setPlanDate(date);\n    } else if (calendarPurpose === 'deadline') {\n      setDeadlineDate(date);\n    }\n    setShowCalendar(false);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-50\">\n      <div ref={ref} className=\"bg-white rounded-large shadow-custom relative p-1.5 border border-gray-300 w-full max-w-lg\">\n        <form className=\"flex flex-col space-y-4\" onSubmit={handleSaveTask}>\n          <input\n            type=\"text\"\n            placeholder=\"Type in what you have to do\"\n            className={`flex-grow p-2 border rounded-custom bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blueCustom ${showTooltip ? 'border-red-500' : 'border-gray-300'}`}\n            value={taskText}\n            onChange={(e) => setTaskText(e.target.value)}\n            style={{ minWidth: '300px' }} // Adjust the minimum width for larger screens\n          />\n          {showTooltip && (\n            <div className=\"text-sm text-red-500 bg-white border border-red-500 rounded-custom p-2 shadow-lg w-auto left-0 font-semibold\">\n              To Do Input cannot be empty.\n            </div>\n          )}\n          <div className=\"flex space-x-2\">\n            <button\n              type=\"button\"\n              className=\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-grayCustom-dark font-medium bg-[#0000000D] hover:bg-gray-200\"\n              onClick={() => {\n                setCalendarPurpose('deadline');\n                setShowCalendar(true);\n              }}\n              style={{ flex: '1 1 0' }}\n            >\n              <PlanTaskIcon className=\"h-5 w-5\" />\n              {deadlineDate ? format(new Date(deadlineDate), 'MMMM d') : 'Deadline'}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setCalendarPurpose('plan');\n                setShowCalendar(true);\n              }}\n              className=\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-pinkCustom font-medium bg-pinkCustom-light hover:bg-pink-200\"\n              style={{ flex: '1 1 0' }}\n            >\n              <PlannedIcon className=\"h-5 w-5 text-pinkCustom\" />\n              {planDate ? format(new Date(planDate), 'MMMM d') : 'Plan'}\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex items-center justify-center gap-1 flex-grow h-10 rounded-custom text-blueCustom font-medium bg-blueCustom-light hover:bg-blue-200\"\n              style={{ flex: '1 1 0' }}\n            >\n              <AddTodoIcon className=\"h-5 w-5\" />\n              Save Task\n            </button>\n          </div>\n          {showCalendar && (\n            <div className=\"absolute right-0 mt-2\">\n              <Calendar\n                selectedDate={calendarPurpose === 'plan' ? planDate : deadlineDate}\n                setSelectedDate={handleDateChange}\n                setShowCalendar={setShowCalendar}\n              />\n            </div>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,MAAM,KAAQ,UAAU,CACjC,OAASC,YAAY,CAAEC,WAAW,CAAEC,WAAW,KAAQ,UAAU,CACjE,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAgC,IAA/B,CAAEC,IAAI,CAAEC,UAAU,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CACjE,KAAM,CAACI,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAACc,IAAI,CAACK,IAAI,CAAC,CACnD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAACc,IAAI,CAACM,QAAQ,CAAG,GAAI,CAAAE,IAAI,CAACR,IAAI,CAACM,QAAQ,CAAC,CAAG,IAAI,CAAC,CACxF,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAGxB,QAAQ,CAACc,IAAI,CAACS,YAAY,CAAG,GAAI,CAAAD,IAAI,CAACR,IAAI,CAACS,YAAY,CAAC,CAAG,IAAI,CAAC,CACxG,KAAM,CAACE,YAAY,CAAEC,eAAe,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAC2B,WAAW,CAAEC,cAAc,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC6B,eAAe,CAAEC,kBAAkB,CAAC,CAAG9B,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9D,KAAM,CAAA+B,GAAG,CAAG9B,MAAM,CAAC,IAAI,CAAC,CAExBC,SAAS,CAAC,IAAM,CACd,QAAS,CAAA8B,kBAAkBA,CAACC,KAAK,CAAE,CACjC,GAAIF,GAAG,CAACG,OAAO,EAAI,CAACH,GAAG,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CACtDpB,OAAO,CAAC,CAAC,CACX,CACF,CACAqB,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,CAACD,GAAG,CAAEf,OAAO,CAAC,CAAC,CAElB,KAAM,CAAAwB,cAAc,CAAG,KAAO,CAAAC,CAAC,EAAK,CAClCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAIzB,QAAQ,CAAC0B,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC1Bf,cAAc,CAAC,IAAI,CAAC,CACpB,OACF,CACA,KAAM,CAAAgB,WAAW,CAAG,CAClB,GAAG9B,IAAI,CACPK,IAAI,CAAEF,QAAQ,CACdG,QAAQ,CAAEA,QAAQ,CAAGjB,MAAM,CAACiB,QAAQ,CAAE,YAAY,CAAC,CAAG,IAAI,CAC1DG,YAAY,CAAEA,YAAY,CAAGpB,MAAM,CAACoB,YAAY,CAAE,YAAY,CAAC,CAAG,IACpE,CAAC,CAED,KAAM,CAAAR,UAAU,CAAC6B,WAAW,CAAC,CAC7B5B,OAAO,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAA6B,gBAAgB,CAAIC,IAAI,EAAK,CACjC,GAAIjB,eAAe,GAAK,MAAM,CAAE,CAC9BR,WAAW,CAACyB,IAAI,CAAC,CACnB,CAAC,IAAM,IAAIjB,eAAe,GAAK,UAAU,CAAE,CACzCL,eAAe,CAACsB,IAAI,CAAC,CACvB,CACApB,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAED,mBACEjB,IAAA,QAAKsC,SAAS,CAAC,+EAA+E,CAAAC,QAAA,cAC5FvC,IAAA,QAAKsB,GAAG,CAAEA,GAAI,CAACgB,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACnHrC,KAAA,SAAMoC,SAAS,CAAC,yBAAyB,CAACE,QAAQ,CAAET,cAAe,CAAAQ,QAAA,eACjEvC,IAAA,UACEyC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,6BAA6B,CACzCJ,SAAS,qHAAAK,MAAA,CAAsHzB,WAAW,CAAG,gBAAgB,CAAG,iBAAiB,CAAG,CACpL0B,KAAK,CAAEpC,QAAS,CAChBqC,QAAQ,CAAGb,CAAC,EAAKvB,WAAW,CAACuB,CAAC,CAACL,MAAM,CAACiB,KAAK,CAAE,CAC7CE,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAQ,CAAG;AAAA,CAC/B,CAAC,CACD7B,WAAW,eACVlB,IAAA,QAAKsC,SAAS,CAAC,8GAA8G,CAAAC,QAAA,CAAC,8BAE9H,CAAK,CACN,cACDrC,KAAA,QAAKoC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrC,KAAA,WACEuC,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,wIAAwI,CAClJU,OAAO,CAAEA,CAAA,GAAM,CACb3B,kBAAkB,CAAC,UAAU,CAAC,CAC9BJ,eAAe,CAAC,IAAI,CAAC,CACvB,CAAE,CACF6B,KAAK,CAAE,CAAEG,IAAI,CAAE,OAAQ,CAAE,CAAAV,QAAA,eAEzBvC,IAAA,CAACL,YAAY,EAAC2C,SAAS,CAAC,SAAS,CAAE,CAAC,CACnCxB,YAAY,CAAGpB,MAAM,CAAC,GAAI,CAAAmB,IAAI,CAACC,YAAY,CAAC,CAAE,QAAQ,CAAC,CAAG,UAAU,EAC/D,CAAC,cACTZ,KAAA,WACEuC,IAAI,CAAC,QAAQ,CACbO,OAAO,CAAEA,CAAA,GAAM,CACb3B,kBAAkB,CAAC,MAAM,CAAC,CAC1BJ,eAAe,CAAC,IAAI,CAAC,CACvB,CAAE,CACFqB,SAAS,CAAC,wIAAwI,CAClJQ,KAAK,CAAE,CAAEG,IAAI,CAAE,OAAQ,CAAE,CAAAV,QAAA,eAEzBvC,IAAA,CAACJ,WAAW,EAAC0C,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAClD3B,QAAQ,CAAGjB,MAAM,CAAC,GAAI,CAAAmB,IAAI,CAACF,QAAQ,CAAC,CAAE,QAAQ,CAAC,CAAG,MAAM,EACnD,CAAC,cACTT,KAAA,WACEuC,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,wIAAwI,CAClJQ,KAAK,CAAE,CAAEG,IAAI,CAAE,OAAQ,CAAE,CAAAV,QAAA,eAEzBvC,IAAA,CAACH,WAAW,EAACyC,SAAS,CAAC,SAAS,CAAE,CAAC,YAErC,EAAQ,CAAC,EACN,CAAC,CACLtB,YAAY,eACXhB,IAAA,QAAKsC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCvC,IAAA,CAACF,QAAQ,EACPoD,YAAY,CAAE9B,eAAe,GAAK,MAAM,CAAGT,QAAQ,CAAGG,YAAa,CACnEqC,eAAe,CAAEf,gBAAiB,CAClCnB,eAAe,CAAEA,eAAgB,CAClC,CAAC,CACC,CACN,EACG,CAAC,CACJ,CAAC,CACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}