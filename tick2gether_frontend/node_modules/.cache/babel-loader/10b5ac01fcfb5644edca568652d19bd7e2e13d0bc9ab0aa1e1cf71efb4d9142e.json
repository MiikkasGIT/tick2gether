{"ast":null,"code":"import React,{useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import Cookies from'js-cookie';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const ShareHandler=()=>{const{token}=useParams();const navigate=useNavigate();useEffect(()=>{const checkAuthAndFetchDetails=async()=>{const jwtToken=localStorage.getItem('jwtToken')||Cookies.get('jwtToken');const isLoggedIn=!!jwtToken;console.log('JWT Token:',jwtToken);console.log('Is Logged In:',isLoggedIn);if(!isLoggedIn){console.log('User not logged in, redirecting to login page...');navigate(\"/login?returnUrl=/share/\".concat(token));}else{try{console.log('Fetching share details with token:',token);const response=await axios.get(\"http://localhost:8080/api/v1/token/share/\".concat(token),{headers:{Authorization:\"Bearer \".concat(jwtToken)}});console.log('Share details:',response.data);navigate('/dashboard');}catch(error){if(error.response&&error.response.status===401){console.log('Unauthorized, redirecting to login page...');navigate(\"/login?returnUrl=/share/\".concat(token));}else{console.error('Error fetching share details:',error);}}}};checkAuthAndFetchDetails();},[token,navigate]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Processing Share Link...\"})});};export default ShareHandler;","map":{"version":3,"names":["React","useEffect","useParams","useNavigate","Cookies","axios","jsx","_jsx","ShareHandler","token","navigate","checkAuthAndFetchDetails","jwtToken","localStorage","getItem","get","isLoggedIn","console","log","concat","response","headers","Authorization","data","error","status","children"],"sources":["/Users/miikkakoensler/Downloads/Tick2GetherProject/tick2gether_frontend/src/components/ShareHandler.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\nconst ShareHandler = () => {\n  const { token } = useParams();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const checkAuthAndFetchDetails = async () => {\n      const jwtToken = localStorage.getItem('jwtToken') || Cookies.get('jwtToken');\n      const isLoggedIn = !!jwtToken;\n\n      console.log('JWT Token:', jwtToken);\n      console.log('Is Logged In:', isLoggedIn);\n\n      if (!isLoggedIn) {\n        console.log('User not logged in, redirecting to login page...');\n        navigate(`/login?returnUrl=/share/${token}`);\n      } else {\n        try {\n          console.log('Fetching share details with token:', token);\n          const response = await axios.get(`http://localhost:8080/api/v1/token/share/${token}`, {\n            headers: {\n              Authorization: `Bearer ${jwtToken}`,\n            },\n          });\n          console.log('Share details:', response.data);\n          navigate('/dashboard');\n        } catch (error) {\n          if (error.response && error.response.status === 401) {\n            console.log('Unauthorized, redirecting to login page...');\n            navigate(`/login?returnUrl=/share/${token}`);\n          } else {\n            console.error('Error fetching share details:', error);\n          }\n        }\n      }\n    };\n\n    checkAuthAndFetchDetails();\n  }, [token, navigate]);\n\n  return (\n    <div>\n      <h1>Processing Share Link...</h1>\n    </div>\n  );\n};\n\nexport default ShareHandler;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEC,KAAM,CAAC,CAAGP,SAAS,CAAC,CAAC,CAC7B,KAAM,CAAAQ,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,wBAAwB,CAAG,KAAAA,CAAA,GAAY,CAC3C,KAAM,CAAAC,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAIV,OAAO,CAACW,GAAG,CAAC,UAAU,CAAC,CAC5E,KAAM,CAAAC,UAAU,CAAG,CAAC,CAACJ,QAAQ,CAE7BK,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEN,QAAQ,CAAC,CACnCK,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEF,UAAU,CAAC,CAExC,GAAI,CAACA,UAAU,CAAE,CACfC,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC,CAC/DR,QAAQ,4BAAAS,MAAA,CAA4BV,KAAK,CAAE,CAAC,CAC9C,CAAC,IAAM,CACL,GAAI,CACFQ,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAET,KAAK,CAAC,CACxD,KAAM,CAAAW,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAACU,GAAG,6CAAAI,MAAA,CAA6CV,KAAK,EAAI,CACpFY,OAAO,CAAE,CACPC,aAAa,WAAAH,MAAA,CAAYP,QAAQ,CACnC,CACF,CAAC,CAAC,CACFK,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEE,QAAQ,CAACG,IAAI,CAAC,CAC5Cb,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAOc,KAAK,CAAE,CACd,GAAIA,KAAK,CAACJ,QAAQ,EAAII,KAAK,CAACJ,QAAQ,CAACK,MAAM,GAAK,GAAG,CAAE,CACnDR,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CACzDR,QAAQ,4BAAAS,MAAA,CAA4BV,KAAK,CAAE,CAAC,CAC9C,CAAC,IAAM,CACLQ,OAAO,CAACO,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACvD,CACF,CACF,CACF,CAAC,CAEDb,wBAAwB,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACF,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAErB,mBACEH,IAAA,QAAAmB,QAAA,cACEnB,IAAA,OAAAmB,QAAA,CAAI,0BAAwB,CAAI,CAAC,CAC9B,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}